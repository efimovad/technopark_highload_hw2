# technopark_highload_hw2
## Содержание
- [Оценка аудитории](#оценка-аудитории)
- [Оценка нагрузки](#оценка-нагрузки)
- [Выбор планируемой нагрузки](#выбор-планируемой-нагрузки)
- [Логическая схема базы данных](#логическая-схема-базы-данных)
    * [Пользователи](#пользователи)
    * [Объявления](#объявления)
    * [Сообщения](#сообщения)
5. [Физическая система хранения](#физическая-система-хранения)

<!-- toc -->
### Оценка аудитории
Авито ориентирован на Россию. Регистрация происходит по номеру телефона.  
| Население России | Проникновение интернета, 2019 | Проникновение мобильной связи, 2018 | Пользователи Avito в месяц |
|------------------|-------------------------------|-------------------------------------|----------------------------|
| 146,7 млн        | ~116 млн, 80%                 | ~256 млн, 179%                      | 32 млн                     |

Потенциальное максимальное количество аккаунтов на 2018-2019 (если на каждую сим карту - один аккаунт): 
146,7 млн * 0,8 * 1,79 = 210,1 млн

Потенциально проникновение интернета может увеличиться до 100%, но трудно прогнозировать количество сим-карт:
146,7 млн * 1,79 = 262,6 млн

### Оценка нагрузки
| Общее число посещений | Количество страниц на посещение | Время соединения |
|-----------------------|---------------------------------|------------------|
| 229,44 млн            | 12,44                           | 11 минут         |

По данным выше [[1]](https://www.similarweb.com/website/avito.ru): примерно 1 запрос от одного пользователя за минуту.
Тогда среднее rps = 229,44 млн / 60 = 3.824 млн .

### Выбор планируемой нагрузки
Так как с развитием сервиса количество пользователей может увеличиться и максимальная нагрузка может быть в несколько раз больше средней, необходимо ориентироваться на большее значение нагрузки.
### Логическая схема базы данных
#### Пользователи
| id  | имя | id города | телефон | ссылка на автар | тип пользователя |
|-----|-----|-----------|---------|-----------------|------------------|
|bigint|varchar(30)|int|varchar(11)|varchar(100)|shortint|

Города (для экономии памяти добавим таблицу с городами, она будет маленькой (примерно 2386 записей) относительно потенциального количества пользователей и позволит уменьшить количетво используемой памяти)
| id | название |
|----|----------|
|int|varchar(50)|

Пользователь-объявление
| id пользователя | id объявления |
|-----------------|---------------|
|bigint|bigint|

#### Объявления
#####  Общие категории 
Для категорий "Личные вещи", "Животные", "Для бизнеса", "Хобби и отдых", "Бытовая электроника", "Для дома и дачи", "Услуги" 
| id     | название    | описание      | id категории | id подкатегории | цена | ссылка на изображение[10] | внешняя ссылка | адрес        | телефон     | почта        | id способа связи | id статуса |
|--------|-------------|---------------|--------------|-----------------|------|---------------------------|----------------|--------------|-------------|--------------|------------------|----|
| bigint | varchar(50) | varchar(5000) | int          | int             | int  | varchar(200)              | varchar(200)   | varchar(150) | varchar(11) | varchar(100) | shortint         | int|

##### Работа
Раазмещение вакансии  
| id     | название    | график работы | опыт работы | описание      | зарплата | логотип      | адрес        | телефон     | почта        | id способа связи | id статуса |
|--------|-------------|---------------|-------------|---------------|----------|--------------|--------------|-------------|--------------|------------------|----|
| bigint | varchar(50) | shortint      | shortint    | varchar(5000) | int      | varchar(200) | varchar(150)   | varchar(11) | varchar(100) | shortint         |int |
Размещение резюме
Таблица резюме
| id     | желаемая должность | график работы | стаж     | образование | пол  | возраст  | готов-ть к команд-кам | о себе        | зарплата | фотографии      | адрес        | телефон     | почта        | id способа связи | id статуса |
|--------|--------------------|---------------|----------|-------------|------|----------|-----------------------|---------------|----------|-----------------|--------------|-------------|--------------|------------------|-----|
| bigint | varchar(50)        | shortint      | shortint | shortint    | bool | shortint | shortint              | varchar(5000) | int      | varchar(150)[5] | varchar(150) | varchar(11) | varchar(100) | shortint         |int |

Таблица опыт работы
| id     | id резюме | компания    | должность   | начало работы | конец работы | обязанности  |
|--------|-----------|-------------|-------------|---------------|--------------|--------------|
| bigint | bigint    | varchar(50) | varchar(50) | varchar(15)   | varchar(15)  | varchar(500) |
Таблица учебные заведения
| id     | id резюме | название    | специальность | год окончания |
|--------|-----------|-------------|---------------|---------------|
| bigint | bigint    | varchar(50) | varchar(50)   | shortint      |
Таблица знание иностранных языков
| id     | id резюме | id языка | id уровень |
|--------|-----------|----------|------------|
| bigint | bigint    | smalint  | smalint    |

##### Недвижимость
Куплю/сниму в категории "квартира", "комната", "дома, дачи, коттеджи"
| id     | id недвижимости | id длит-ти | id дествия | желаемый район | id города | почта        | телефон     | id типа связи | id параметров | описание      | цена | id статуса |
|--------|-----------------|------------|------------|----------------|-----------|--------------|-------------|---------------|---------------|---------------|------|-----|
| bigint | smalint         | smalint    | smalint    | varchar(100)   | int       | varchar(100) | varchar(11) | smalint       | int           | varchar(5000) | int  | int |

Продам/сдам в категории "квартира", "комната", "дома, дачи, коттеджи"
| id     | id недвижимости | id дествия | вторичка | id длит-ти | адрес        | собственик | телефон     | id типа связи | номер квартиры | описание      | цена | фотографии       | внешняя ссылка | площадь |id статуса |
|--------|-----------------|------------|----------|------------|--------------|------------|-------------|---------------|----------------|---------------|------|------------------|----------------|---------|-----|
| bigint | smalint         | smalint    | bool     | smalint    | varchar(100) | bool       | varchar(11) | smalint       | smalint        | varchar(5000) | int  | varchar(500)[40] | varchar(499)   | int     | int |

#### Сообщения
| id     | id отправителя | id получателя | id чата | дата отправления | сообщение     |
|--------|----------------|---------------|---------|------------------|---------------|
| bigint | int            | int           | int     | time             | varchar(5000) |


### Физическая система хранения
Баги в системе
форма почта принимает бесконечное число символов
форма название компании в таблице опыт работы принмиет
форма обязанности
